<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="finalreport" language="groovy" pageWidth="612" pageHeight="791" columnWidth="576" leftMargin="18" rightMargin="18" topMargin="18" bottomMargin="18">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="SAMPLE_ACCESSION_NUMBER" class="java.lang.Integer"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["/auto/home/akampoow/workspace/OpenELIS-EJB/src/org/openelis/report/finalreport/"]]></defaultValueExpression>
	</parameter>
	<parameter name="ORGANIZATION_ID" class="java.lang.Integer"/>
	<parameter name="REPORT_TYPE" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
     s.id s_id,
     s.accession_number s_accession_number,
     s.revision s_revision,
     s.domain s_domain, so.id so_id
FROM
     sample s, outer sample_organization so
WHERE
     s.accession_number = $P{SAMPLE_ACCESSION_NUMBER} AND so.sample_id = s.id AND so.organization_id = $P{ORGANIZATION_ID}]]>
	</queryString>
	<field name="s_id" class="java.lang.Integer"/>
	<field name="s_accession_number" class="java.lang.Integer"/>
	<field name="s_revision" class="java.lang.Integer"/>
	<field name="s_domain" class="java.lang.String"/>
	<field name="so_id" class="java.lang.Integer"/>
	<variable name="PAGE_COUNTER" class="org.openelis.report.util.PageCounter">
		<variableExpression><![CDATA[$V{PAGE_COUNTER}]]></variableExpression>
		<initialValueExpression><![CDATA[new org.openelis.report.util.PageCounter($P{REPORT_TYPE})]]></initialValueExpression>
	</variable>
	<pageHeader>
		<band height="132" splitType="Stretch">
			<staticText>
				<reportElement x="275" y="120" width="105" height="12"/>
				<textElement textAlignment="Right">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Accession Number]]></text>
			</staticText>
			<textField>
				<reportElement x="399" y="120" width="49" height="12"/>
				<textElement>
					<font fontName="Times New Roman" size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{s_accession_number}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="524" y="120" width="26" height="12">
					<printWhenExpression><![CDATA[$F{s_revision} > 0]]></printWhenExpression>
				</reportElement>
				<textElement>
					<font fontName="Times New Roman"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{s_revision}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="473" y="120" width="51" height="12">
					<printWhenExpression><![CDATA[$F{s_revision} > 0]]></printWhenExpression>
				</reportElement>
				<textElement>
					<font fontName="Times New Roman" isBold="true"/>
				</textElement>
				<text><![CDATA[Revision]]></text>
			</staticText>
			<line>
				<reportElement x="392" y="120" width="1" height="12"/>
			</line>
			<rectangle>
				<reportElement positionType="Float" x="139" y="74" width="411" height="32" forecolor="#E7E4E4" backcolor="#E7E4E4"/>
				<graphicElement>
					<pen lineWidth="0.0" lineStyle="Solid"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement key="header-bottom" x="148" y="74" width="388" height="28" backcolor="#E7E4E4"/>
				<textElement>
					<font fontName="Times New Roman" size="22" isBold="false" isItalic="true" isUnderline="false" isStrikeThrough="false" pdfFontName="Times-Italic" pdfEncoding="CP1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[The University of Iowa]]></text>
			</staticText>
			<image>
				<reportElement key="uhl-logo-image" positionType="Float" x="1" y="0" width="85" height="85"/>
				<imageExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "/uhlseal.gif"]]></imageExpression>
			</image>
			<line>
				<reportElement key="header-divide-line" x="139" y="66" width="411" height="1"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement key="header-top" x="148" y="0" width="402" height="54"/>
				<textElement>
					<font fontName="Times New Roman" size="37" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Times-Roman" pdfEncoding="CP1252" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[State Hygienic Laboratory]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="12" splitType="Stretch">
			<subreport>
				<reportElement x="0" y="0" width="550" height="12">
					<printWhenExpression><![CDATA[$F{s_domain}.equals("E")]]></printWhenExpression>
				</reportElement>
				<subreportParameter name="SAMPLE_ORGANIZATION_ID">
					<subreportParameterExpression><![CDATA[$F{so_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="SAMPLE_ACCESSION_NUMBER">
					<subreportParameterExpression><![CDATA[$F{s_accession_number}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "sampleEnvironmental.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement x="0" y="0" width="550" height="12">
					<printWhenExpression><![CDATA[$F{s_domain}.equals("W")]]></printWhenExpression>
				</reportElement>
				<subreportParameter name="SAMPLE_ORGANIZATION_ID">
					<subreportParameterExpression><![CDATA[$F{so_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="SAMPLE_ACCESSION_NUMBER">
					<subreportParameterExpression><![CDATA[$F{s_accession_number}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "samplePrivateWell.jasper"]]></subreportExpression>
			</subreport>
		</band>
		<band height="132">
			<staticText>
				<reportElement positionType="Float" x="186" y="84" width="194" height="12"/>
				<textElement textAlignment="Center">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Results of Analyses]]></text>
			</staticText>
			<subreport isUsingCache="true">
				<reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="12" width="550" height="12"/>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "sampleQaeventNote.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement positionType="Float" x="0" y="24" width="550" height="12"/>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="SAMPLE_REFERENCE_TABLE_ID">
					<subreportParameterExpression><![CDATA[8]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "sampleAuxData.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement positionType="Float" x="0" y="96" width="550" height="12"/>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "analysis.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement positionType="Float" x="0" y="60" width="550" height="12"/>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "analysisPending.jasper"]]></subreportExpression>
			</subreport>
			<staticText>
				<reportElement positionType="Float" x="185" y="48" width="194" height="12"/>
				<box bottomPadding="0"/>
				<textElement textAlignment="Center">
					<font fontName="Times New Roman" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Pending Analyses]]></text>
			</staticText>
			<subreport>
				<reportElement positionType="Float" x="0" y="108" width="550" height="12"/>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "analysisUnitList.jasper"]]></subreportExpression>
			</subreport>
			<image>
				<reportElement key="omr-middle-image" positionType="Float" x="552" y="32" width="40" height="65">
					<printWhenExpression><![CDATA[$V{PAGE_COUNTER}.isNotFirstPage()]]></printWhenExpression>
				</reportElement>
				<imageExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "/omrmiddle.gif"]]></imageExpression>
			</image>
			<image>
				<reportElement key="omr-first-image" positionType="Float" x="552" y="32" width="40" height="65">
					<printWhenExpression><![CDATA[$V{PAGE_COUNTER}.isFirstPage()]]></printWhenExpression>
				</reportElement>
				<imageExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "/omrfirst.gif"]]></imageExpression>
			</image>
		</band>
	</detail>
	<pageFooter>
		<band height="65">
			<textField evaluationTime="Report">
				<reportElement x="307" y="4" width="27" height="12"/>
				<textElement>
					<font fontName="Times New Roman"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="280" y="4" width="27" height="12"/>
				<textElement textAlignment="Right">
					<font fontName="Times New Roman"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{PAGE_NUMBER} + " of "]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="2" y="16" width="550" height="1"/>
			</line>
			<staticText>
				<reportElement x="2" y="25" width="114" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[Michael D. Wichman, Ph.D.]]></text>
			</staticText>
			<staticText>
				<reportElement x="120" y="25" width="133" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[State Hygienic Laboratory]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="55" width="115" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8" isItalic="true"/>
				</textElement>
				<text><![CDATA[http://www.uhl.uiowa.edu]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="35" width="114" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[Michael A. Pentella, Ph.D.]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="45" width="114" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[Associate Directors]]></text>
			</staticText>
			<staticText>
				<reportElement x="120" y="35" width="133" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[UI Research Park, Iowa City, IA  52242]]></text>
			</staticText>
			<staticText>
				<reportElement x="120" y="45" width="133" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[319/335-4500   Fax:  319/335-4555]]></text>
			</staticText>
			<staticText>
				<reportElement x="402" y="35" width="150" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[2220 S. Ankeny Blvd, Ankeny, IA  50023 ]]></text>
			</staticText>
			<staticText>
				<reportElement x="402" y="25" width="150" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[Iowa Laboratories Complex]]></text>
			</staticText>
			<staticText>
				<reportElement x="402" y="45" width="150" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[515/725-1600   Fax:  515/725-1642]]></text>
			</staticText>
			<staticText>
				<reportElement x="253" y="4" width="27" height="12"/>
				<textElement textAlignment="Right">
					<font fontName="Times New Roman"/>
				</textElement>
				<text><![CDATA[Page]]></text>
			</staticText>
			<line>
				<reportElement key="left-folding-line" positionType="Float" mode="Opaque" x="0" y="-450" width="6" height="1"/>
			</line>
			<line>
				<reportElement key="right-folding-line" positionType="Float" mode="Opaque" x="570" y="-450" width="6" height="1"/>
			</line>
			<staticText>
				<reportElement x="262" y="35" width="134" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[1838 Highway 86, Milford, IA 51351]]></text>
			</staticText>
			<staticText>
				<reportElement x="262" y="45" width="134" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[712/337-3669  ext. 6 Fax: 712/337-0227]]></text>
			</staticText>
			<staticText>
				<reportElement x="262" y="25" width="134" height="10"/>
				<textElement>
					<font fontName="Times New Roman" size="8"/>
				</textElement>
				<text><![CDATA[Lakeside Laboratory]]></text>
			</staticText>
		</band>
	</pageFooter>
</jasperReport>
