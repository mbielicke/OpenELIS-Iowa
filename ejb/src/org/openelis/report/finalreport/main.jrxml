<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="finalreport" language="groovy" pageWidth="612" pageHeight="791" columnWidth="576" leftMargin="18" rightMargin="18" topMargin="18" bottomMargin="18">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="org.openelis.report.finalreport.OrganizationInstance"/>
	<parameter name="SAMPLE_ID" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="ORGANIZATION_ID" class="java.lang.Integer">
		<defaultValueExpression><![CDATA["0"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="REPORT_TYPE" class="java.lang.String"/>
	<parameter name="SYSTEM_NAME" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA['org_report_to']]></parameterDescription>
	</parameter>
	<parameter name="ORGANIZATION_INSTANCE" class="org.openelis.report.finalreport.OrganizationInstance" isForPrompting="false"/>
	<queryString>
		<![CDATA[SELECT
     s.id s_id,
     s.accession_number s_accession_number,
     s.revision s_revision,
     s.domain s_domain
FROM
     sample s
WHERE
     s.id $P!{SAMPLE_ID}]]>
	</queryString>
	<field name="s_id" class="java.lang.Integer"/>
	<field name="s_accession_number" class="java.lang.Integer"/>
	<field name="s_revision" class="java.lang.Integer"/>
	<field name="s_domain" class="java.lang.String"/>
	<variable name="PAGE_COUNTER" class="org.openelis.utils.PageCounter">
		<variableExpression><![CDATA[$V{PAGE_COUNTER}]]></variableExpression>
		<initialValueExpression><![CDATA[new org.openelis.utils.PageCounter($P{REPORT_TYPE})]]></initialValueExpression>
	</variable>
	<group name="Sample_Organization" isStartNewPage="true" isResetPageNumber="true">
		<groupExpression><![CDATA[$P{ORGANIZATION_ID}+"-"+$F{s_id}]]></groupExpression>
		<groupHeader>
			<band height="12">
				<subreport>
					<reportElement x="0" y="0" width="576" height="12">
						<printWhenExpression><![CDATA[$F{s_domain}.equals("W")]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="SAMPLE_ID">
						<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORGANIZATION_INSTANCE">
						<subreportParameterExpression><![CDATA[$P{ORGANIZATION_INSTANCE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORGANIZATION_ID">
						<subreportParameterExpression><![CDATA[$P{ORGANIZATION_ID}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "samplePrivateWell.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</groupHeader>
	</group>
	<pageHeader>
		<band height="98" splitType="Stretch">
			<image>
				<reportElement key="uhl-logo-image" positionType="Float" x="1" y="0" width="85" height="85"/>
				<imageExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "/uhlseal.gif"]]></imageExpression>
			</image>
			<staticText>
				<reportElement key="header-top" x="139" y="0" width="437" height="47"/>
				<textElement textAlignment="Left">
					<font size="33" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Times-Roman" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[State Hygienic Laboratory]]></text>
			</staticText>
			<line>
				<reportElement key="header-divide-line" x="139" y="46" width="437" height="1"/>
				<graphicElement>
					<pen lineWidth="2.0" lineStyle="Solid"/>
				</graphicElement>
			</line>
			<rectangle>
				<reportElement positionType="Float" x="139" y="53" width="437" height="28" forecolor="#E7E4E4" backcolor="#E7E4E4"/>
				<graphicElement>
					<pen lineWidth="0.0" lineStyle="Solid"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement key="header-bottom" x="148" y="53" width="248" height="28" backcolor="#E7E4E4"/>
				<textElement textAlignment="Left">
					<font size="22" isBold="false" isItalic="true" isUnderline="false" isStrikeThrough="false" pdfFontName="Times-Italic" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[The University of Iowa]]></text>
			</staticText>
			<staticText>
				<reportElement x="317" y="86" width="107" height="12"/>
				<textElement textAlignment="Right">
					<font size="10" isBold="false" isItalic="true" pdfFontName="Times-Italic"/>
				</textElement>
				<text><![CDATA[Accession Number]]></text>
			</staticText>
			<line>
				<reportElement x="429" y="86" width="1" height="12"/>
			</line>
			<textField>
				<reportElement x="435" y="86" width="50" height="12"/>
				<textElement textAlignment="Left">
					<font size="10" pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{s_accession_number}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="492" y="86" width="78" height="12">
					<printWhenExpression><![CDATA[$F{s_revision} > 0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Left">
					<font isBold="true" isItalic="true" pdfFontName="Times-BoldItalic"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Revision "+$F{s_revision}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="132">
			<staticText>
				<reportElement positionType="Float" x="191" y="82" width="194" height="14"/>
				<textElement textAlignment="Center">
					<font size="12" isBold="true" pdfFontName="Times-Bold"/>
				</textElement>
				<text><![CDATA[Results of Analyses]]></text>
			</staticText>
			<subreport isUsingCache="true">
				<reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="12" width="550" height="12" isRemoveLineWhenBlank="true"/>
				<subreportParameter name="SUBREPORT_DIR">
					<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "sampleQaeventNote.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement positionType="Float" x="0" y="24" width="550" height="12" isRemoveLineWhenBlank="true"/>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="SAMPLE_REFERENCE_TABLE_ID">
					<subreportParameterExpression><![CDATA[8]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "sampleAuxData.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement positionType="Float" x="0" y="96" width="550" height="12"/>
				<subreportParameter name="SUBREPORT_DIR">
					<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "analysis.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement positionType="Float" x="0" y="60" width="550" height="12" isRemoveLineWhenBlank="true"/>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "analysisPending.jasper"]]></subreportExpression>
			</subreport>
			<staticText>
				<reportElement positionType="Float" x="191" y="46" width="194" height="14"/>
				<box bottomPadding="0"/>
				<textElement textAlignment="Center">
					<font size="12" isBold="true" pdfFontName="Times-Bold"/>
				</textElement>
				<text><![CDATA[Pending Analyses]]></text>
			</staticText>
			<subreport>
				<reportElement positionType="Float" x="0" y="108" width="550" height="12"/>
				<subreportParameter name="SAMPLE_ID">
					<subreportParameterExpression><![CDATA[$F{s_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "analysisUnitList.jasper"]]></subreportExpression>
			</subreport>
			<image>
				<reportElement key="omr-middle-image" positionType="Float" x="552" y="32" width="40" height="65">
					<printWhenExpression><![CDATA[$V{PAGE_COUNTER}.isNotFirstPage()]]></printWhenExpression>
				</reportElement>
				<imageExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "/omrmiddle.gif"]]></imageExpression>
			</image>
			<image>
				<reportElement key="omr-first-image" positionType="Float" x="552" y="32" width="40" height="65">
					<printWhenExpression><![CDATA[$V{PAGE_COUNTER}.isFirstPage()]]></printWhenExpression>
				</reportElement>
				<imageExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "/omrfirst.gif"]]></imageExpression>
			</image>
		</band>
	</detail>
	<pageFooter>
		<band height="65">
			<textField evaluationTime="Report">
				<reportElement x="307" y="4" width="27" height="12"/>
				<textElement>
					<font pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="280" y="4" width="27" height="12"/>
				<textElement textAlignment="Right">
					<font pdfFontName="Times-Roman"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{PAGE_NUMBER} + " of "]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="16" width="552" height="1"/>
			</line>
			<staticText>
				<reportElement x="2" y="25" width="114" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[Michael D. Wichman, Ph.D.]]></text>
			</staticText>
			<staticText>
				<reportElement x="120" y="25" width="133" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[State Hygienic Laboratory]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="55" width="115" height="10"/>
				<textElement>
					<font size="8" isItalic="true" pdfFontName="Times-Italic"/>
				</textElement>
				<text><![CDATA[http://www.uhl.uiowa.edu]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="35" width="114" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[Michael A. Pentella, Ph.D.]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="45" width="114" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[Associate Directors]]></text>
			</staticText>
			<staticText>
				<reportElement x="120" y="35" width="133" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[UI Research Park, Iowa City, IA  52242]]></text>
			</staticText>
			<staticText>
				<reportElement x="120" y="45" width="133" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[319/335-4500   Fax:  319/335-4555]]></text>
			</staticText>
			<staticText>
				<reportElement x="402" y="35" width="150" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[2220 S. Ankeny Blvd, Ankeny, IA  50023 ]]></text>
			</staticText>
			<staticText>
				<reportElement x="402" y="25" width="150" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[Iowa Laboratories Complex]]></text>
			</staticText>
			<staticText>
				<reportElement x="402" y="45" width="150" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[515/725-1600   Fax:  515/725-1642]]></text>
			</staticText>
			<staticText>
				<reportElement x="253" y="4" width="27" height="12"/>
				<textElement textAlignment="Right">
					<font pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[Page]]></text>
			</staticText>
			<line>
				<reportElement key="left-folding-line" positionType="Float" mode="Opaque" x="0" y="-450" width="6" height="1"/>
			</line>
			<line>
				<reportElement key="right-folding-line" positionType="Float" mode="Opaque" x="570" y="-450" width="6" height="1"/>
			</line>
			<staticText>
				<reportElement x="262" y="35" width="134" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[1838 Highway 86, Milford, IA 51351]]></text>
			</staticText>
			<staticText>
				<reportElement x="262" y="45" width="134" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[712/337-3669  ext. 6 Fax: 712/337-0227]]></text>
			</staticText>
			<staticText>
				<reportElement x="262" y="25" width="134" height="10"/>
				<textElement>
					<font size="8" pdfFontName="Times-Roman"/>
				</textElement>
				<text><![CDATA[Lakeside Laboratory]]></text>
			</staticText>
		</band>
	</pageFooter>
</jasperReport>
