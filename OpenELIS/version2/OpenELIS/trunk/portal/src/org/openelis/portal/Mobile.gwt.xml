  <module>
  
    <define-property name="mobile.user.agent" values="mobile, not_mobile" />
    <property-provider name="mobile.user.agent"><![CDATA[
     {
      var queryString = window.location.search;
      if(queryString.indexOf('mobile') != -1) {return 'mobile';}
    
      var ua = window.navigator.userAgent.toLowerCase();
      if (ua.indexOf('android') != -1) { return 'mobile'; }
      if (ua.indexOf('iphone') != -1) { return 'mobile'; }
    
      return 'not_mobile';
    }
    ]]></property-provider>
  
    <set-property name="mobile.user.agent" value="not_mobile" >
      <none> <!-- Actually means NOR, in this case "not safari" -->
        <when-property-is name="user.agent" value="safari" />
      </none>
   </set-property>
   
</module>