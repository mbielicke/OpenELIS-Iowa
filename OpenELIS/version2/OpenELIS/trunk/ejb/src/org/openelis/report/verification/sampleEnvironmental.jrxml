<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sampleEnvironmental" language="groovy" pageWidth="480" pageHeight="572" orientation="Landscape" columnWidth="480" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="org.openelis.utils.JasperUtil"/>
	<parameter name="SAMPLE_ACCESSION_NUMBER" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT
     s.client_reference s_client_reference,
     s.released_date s_released_date,
     se.description se_description,
     se.collector se_collector,
     se.collector_phone se_collector_phone,
     se.location se_location, se.priority se_priority,
     se.is_hazardous se_is_hazardous,
     p.name p_name, a.city a_city,
     a.multiple_unit a_multiple_unit,
     a.street_address a_street_address,
     a.city a_city, a.zip_code a_zip_code,
     a.state a_state
FROM
     sample_environmental se,
     sample s,
     outer address a,
     outer (sample_project  sp,
     project p)
WHERE
     s.domain = 'E' AND s.accession_number = $P{SAMPLE_ACCESSION_NUMBER} AND se.sample_id = s.id
     AND a.id = se.location_address_id AND sp.sample_id = s.id AND sp.project_id = p.id
     AND sp.is_permanent = 'Y']]>
	</queryString>
	<field name="s_client_reference" class="java.lang.String"/>
	<field name="s_released_date" class="java.sql.Timestamp"/>
	<field name="se_description" class="java.lang.String"/>
	<field name="se_collector" class="java.lang.String"/>
	<field name="se_collector_phone" class="java.lang.String"/>
	<field name="se_location" class="java.lang.String"/>
	<field name="se_priority" class="java.lang.Integer"/>
	<field name="se_is_hazardous" class="java.lang.String"/>
	<field name="p_name" class="java.lang.String"/>
	<field name="a_city" class="java.lang.String"/>
	<field name="a_multiple_unit" class="java.lang.String"/>
	<field name="a_street_address" class="java.lang.String"/>
	<field name="a_zip_code" class="java.lang.String"/>
	<field name="a_state" class="java.lang.String"/>
	<detail>
		<band height="72" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="24" width="66" height="12"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Collection Site:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="66" y="12" width="265" height="12"/>
				<textElement>
					<font size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{se_collector}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="66" y="60" width="265" height="12"/>
				<textElement>
					<font size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[JasperUtil.concatWithSeparator(JasperUtil.concatWithSeparator($F{a_city}," ",$F{a_state}), " ", $F{a_zip_code})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="342" y="36" width="48" height="12"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Project:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="66" height="12"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Description:]]></text>
			</staticText>
			<staticText>
				<reportElement x="342" y="12" width="48" height="12"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Phone:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="66" y="0" width="265" height="12"/>
				<textElement>
					<font size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{se_description}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="342" y="0" width="48" height="12"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Reference:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="390" y="36" width="90" height="12"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{p_name}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="66" y="24" width="265" height="12"/>
				<textElement>
					<font size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{se_location}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="390" y="12" width="90" height="12"/>
				<textElement>
					<font size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{se_collector_phone}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="12" width="66" height="12"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Collector:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="390" y="0" width="90" height="12"/>
				<textElement>
					<font size="10"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{s_client_reference}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="390" y="48" width="19" height="12"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{se_is_hazardous}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="342" y="48" width="48" height="12"/>
				<textElement/>
				<text><![CDATA[Hazardous:]]></text>
			</staticText>
			<staticText>
				<reportElement x="342" y="24" width="48" height="12"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Priority:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="390" y="24" width="32" height="12"/>
				<textElement/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{se_priority}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="66" y="48" width="265" height="12"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{a_street_address}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" x="66" y="36" width="265" height="12" isRemoveLineWhenBlank="true"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{a_multiple_unit}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
