<?xml version="1.0" encoding="utf-8" ?>
<project name="OpenELIS" default="javac" basedir=".">
	<!-- Arguments to gwtc and devmode targets -->
	<property name="gwt.args" value="" />

	<!-- Configure path to GWT SDK -->
	<property name="gwt.sdk" location="/usr/local/java/gwt-2.6.0" />
	
	<property name="jboss.home" location="/usr/local/java/wildfly-8.0.0.Final"/>

	<path id="project.class.path">
		<pathelement location="${gwt.sdk}/gwt-user.jar" />
		<pathelement location="bin" />
		<pathelement location="war/WEB-INF/classes"/>
		<pathelement location="../OpenELIS-UI/bin"/>
		<pathelement location="../OpenELIS-Common/bin"/>
	    <pathelement location="../OpenELIS-EJB/bin"/>
		<pathelement location="../OpenELIS-UI/src"/>
        <pathelement location="../OpenELIS-Lib/bin"/>
		<pathelement location="../Security/src"/>
		<fileset dir="${gwt.sdk}" includes="gwt-dev*.jar" />
		<!-- Add any additional non-server libs (such as JUnit) -->
		<fileset dir="../OpenELIS-Lib/lib" includes="*.jar" />
		<fileset dir="../OpenELIS-UI/lib" includes="*.jar"/>
		<fileset dir="../OpenELIS-EJB/lib" includes="*.jar"/>
		<fileset dir="${jboss.home}/bin/client" includes="jboss-client.jar" />
		<fileset dir="${jboss.home}/modules/system/layers/base/javax/websocket/api/main" includes="jboss-websocket-api_1.0_spec-1.0.0.Final.jar" />
		<fileset dir="${jboss.home}/modules/system/layers/base/javax/persistence/api/main" includes="*.jar" />
		<fileset dir="${jboss.home}/modules/system/layers/base/javax/annotation/api/main" includes="*.jar"/>
		<fileset dir="${jboss.home}/modules/system/layers/base/javax/validation/api/main" includes="*.jar"/>
		<fileset dir="${jboss.home}/modules/system/layers/base/org/picketbox/main" includes="*.jar"/>
		<fileset dir="${jboss.home}/modules/system/layers/base/org/jboss/jboss-transaction-spi/main" includes="*.jar"/>
		<fileset dir="${jboss.home}/modules/system/layers/base/org/jboss/ejb3/main" includes="*.jar"/>
		
	</path>


	<target name="javac" depends="clean" description="Compile java source to bytecode">
		<mkdir dir="../OpenELIS-UI/bin"/>
		<javac includeantruntime="false" srcdir="../OpenELIS-UI/src" includes="**" encoding="utf-8" destdir="../OpenELIS-UI/bin" source="1.7" target="1.7" nowarn="true" debug="true" debuglevel="lines,vars,source">
            <classpath>
    				<pathelement location="${gwt.sdk}/gwt-user.jar" />
    		    	<pathelement location="../OpenELIS-UI/bin"/>
        		<fileset dir="${jboss.home}/bin/client" includes="jboss-client.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/websocket/api/main" includes="jboss-websocket-api_1.0_spec-1.0.0.Final.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/persistence/api/main" includes="*.jar" />
            	<fileset dir="../OpenELIS-UI/lib/" includes="*.jar"/>
            </classpath>
	    </javac>
		<mkdir dir="../OpenELIS-Lib/bin"/>
		<javac executable="/usr/local/java/jdk1.7.0_09/bin/javac" includeantruntime="false" srcdir="../OpenELIS-Lib/src" includes="**" encoding="utf-8" destdir="../OpenELIS-Lib/bin" source="1.7" target="1.7" nowarn="true" debug="true" debuglevel="lines,vars,source">
		    <classpath>
				<pathelement location="${gwt.sdk}/gwt-user.jar" />
		    	<fileset dir="${gwt.sdk}" includes="gwt-dev*.jar" />
		    	<pathelement location="../OpenELIS-UI/bin"/>
		    	<fileset dir="../OpenELIS-Lib/lib" includes="*.jar" />
        		<fileset dir="${jboss.home}/bin/client" includes="jboss-client.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/persistence/api/main" includes="*.jar" />
		    </classpath>	
	    </javac>
		

		<mkdir dir="../OpenELIS-Common/bin"/>
		<mkdir dir="war/WEB-INF/classes"/>
		<mkdir dir="../OpenELIS-EJB/bin"/>
		<javac includeantruntime="false" srcdir="../OpenELIS-EJB/src:../OpenELIS-Common/src/org/openelis/domain:../OpenELIS-Common/src/org/openelis/constants:../OpenELIS-Common/src/org/openelis/manager:../OpenELIS-Common/src/org/openelis/utilcommon:../OpenELIS-Common/src/org/openelis/meta:../OpenELIS-Common/src/org/openelis/exception:../OpenELIS-GWT/src/org/openelis/cache:../Security/shared" includes="**" encoding="utf-8" destdir="../OpenELIS-EJB/bin" source="1.7" target="1.7" nowarn="true" debug="true" debuglevel="lines,vars,source">
            <classpath>

        		<pathelement location="../OpenELIS-UI/bin"/>
        		<fileset dir="../OpenELIS-EJB/lib" includes="*.jar"/>
        		<fileset dir="${jboss.home}/bin/client" includes="jboss-client.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/websocket/api/main" includes="jboss-websocket-api_1.0_spec-1.0.0.Final.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/persistence/api/main" includes="*.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/annotation/api/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/validation/api/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/org/picketbox/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/org/jboss/jboss-transaction-spi/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/org/jboss/ejb3/main" includes="*.jar"/>
            </classpath>
	    </javac>
		
		<javac includeantruntime="false" srcdir=":../OpenELIS-Common/src" includes="**" encoding="utf-8" destdir="../OpenELIS-Common/bin" source="1.7" target="1.7" nowarn="true" debug="true" debuglevel="lines,vars,source">
            <classpath>
				<pathelement location="${gwt.sdk}/gwt-user.jar" />
		    	<fileset dir="${gwt.sdk}" includes="gwt-dev*.jar" />
        		<pathelement location="../OpenELIS-UI/bin"/>
            	<pathelement location="../OpenELIS-EJB/bin"/>
            	<fileset dir="../OpenELIS-UI/lib" includes="*.jar"/>
        		<fileset dir="${jboss.home}/bin/client" includes="jboss-client.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/websocket/api/main" includes="jboss-websocket-api_1.0_spec-1.0.0.Final.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/persistence/api/main" includes="*.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/annotation/api/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/validation/api/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/org/picketbox/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/org/jboss/jboss-transaction-spi/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/org/jboss/ejb3/main" includes="*.jar"/>
            </classpath>
	    </javac>
		
		<javac includeantruntime="false" srcdir="src" includes="**" encoding="utf-8" destdir="war/WEB-INF/classes" source="1.7" target="1.7" nowarn="true" debug="true" debuglevel="lines,vars,source">
            <classpath>
				<pathelement location="${gwt.sdk}/gwt-user.jar" />
		    	<fileset dir="${gwt.sdk}" includes="gwt-dev*.jar" />
        		<pathelement location="../OpenELIS-UI/bin"/>
            	<pathelement location="../OpenELIS-Common/bin"/>
            	<pathelement location="../OpenELIS-EJB/bin"/>
            	<pathelement location="../OpenELIS-Lib/bin"/>
            	<fileset dir="../OpenELIS-UI/lib" includes="*.jar"/>
            	<fileset dir="../OpenELIS-Lib/lib" includes="*.jar"/>
        		<fileset dir="${jboss.home}/bin/client" includes="jboss-client.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/websocket/api/main" includes="jboss-websocket-api_1.0_spec-1.0.0.Final.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/persistence/api/main" includes="*.jar" />
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/annotation/api/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/javax/validation/api/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/org/picketbox/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/org/jboss/jboss-transaction-spi/main" includes="*.jar"/>
        		<fileset dir="${jboss.home}/modules/system/layers/base/org/jboss/ejb3/main" includes="*.jar"/>
            </classpath>
	    </javac>
		<!--
		<mkdir dir="../OpenELIS-EJB/bin"/>
		<javac includeantruntime="false" srcdir="../OpenELIS-EJB/src" includes="**" encoding="utf-8" destdir="../OpenELIS-EJB/bin" source="1.7" target="1.7" nowarn="true" debug="true" debuglevel="lines,vars,source">
            <classpath refid="project.class.path"/>
	    </javac>
		
		<mkdir dir="war/WEB-INF/classes" />
		<javac includeantruntime="false" srcdir="src" includes="**" encoding="utf-8" destdir="war/WEB-INF/classes" source="1.7" target="1.7" nowarn="true" debug="true" debuglevel="lines,vars,source">
			<classpath refid="project.class.path" />
		</javac>
		-->
	</target>

	<target name="clean" description="Cleans this project">
		<delete dir="../OpenELIS-Lib/bin" failonerror="false"/>
		<delete dir="../OpenELIS-UI/bin" failonerror="false"/>
		<delete dir="../OpenELIS-Common/bin" failonerror="false"/>
		<delete dir="../OpenELIS-EJB/bin" failonerror="false"/>
		<delete dir="war/WEB-INF/classes" failonerror="false" />
		
	</target>

</project>
